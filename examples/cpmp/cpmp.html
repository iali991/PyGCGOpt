<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Exploring DW Dual Bounds" href="../alldecomps/alldecomps.html" /><link rel="prev" title="Examples" href="../index.html" />

    <link rel="shortcut icon" href="../../_static/favicon.ico"/><meta name="generator" content="sphinx-4.3.1, furo 2021.11.23"/>
        <title>Decomposing the Capacitated p-Median Problem - PyGCGOpt 0.1.0</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?digest=7f0192ddeb2adecfbaa87ffbcf67d16358b30bc1" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?digest=0af69da206d614734f649b27d4cdc2dd6c31f41d" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">PyGCGOpt 0.1.0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  
  <span class="sidebar-brand-text">PyGCGOpt 0.1.0</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">PyGCGOpt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../INSTALL.html">Installation</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Examples</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Decomposing the Capacitated p-Median Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../alldecomps/alldecomps.html">Exploring DW Dual Bounds</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../api/index.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../api/gcgmodel.html">GCGModel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/decomposition.html">Decomposition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/detprobdata.html">DetProbData</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/detector.html">Detector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../api/pricingsolver.html">PricingSolver</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About the project</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../CHANGELOG.html">CHANGELOG</a></li>
<li class="toctree-l1"><a class="reference external" href="https://gcg.or.rwth-aachen.de/doc-preview/doc-3.1.0/index.html">GCG Documentation</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/scipopt/PyGCGOpt">GitHub repo</a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.scipopt.org/doc-8.0.0/html/">SCIP Documentation</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/scipopt/PySCIPOpt">PySCIPOpt repo</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<section id="Decomposing-the-Capacitated-p-Median-Problem">
<h1>Decomposing the Capacitated p-Median Problem<a class="headerlink" href="#Decomposing-the-Capacitated-p-Median-Problem" title="Permalink to this headline">¶</a></h1>
<p>The capacitated p-median problem (CPMP) is a known and well-studied problem from the literature. Given <span class="math notranslate nohighlight">\(n \in \mathbb{N}\)</span> locations, the task is to select <span class="math notranslate nohighlight">\(p \in \mathbb{N}\)</span> <em>median</em> locations with <span class="math notranslate nohighlight">\(p \leq n\)</span> and to assign each location to exactly one median. For any two locations <span class="math notranslate nohighlight">\(i,j \in [n]\)</span>, the distance between them is given by <span class="math notranslate nohighlight">\(d_{ij} \in \mathbb{R}\)</span>. The distance between the locations and their assigned medians is minimized. Every location <span class="math notranslate nohighlight">\(i \in [n]\)</span>
has a <em>demand</em> <span class="math notranslate nohighlight">\(q_i \in \mathbb{R}\)</span> and a maximum <em>capacity</em> <span class="math notranslate nohighlight">\(Q_i \in \mathbb{R}\)</span>. For every selected median, the sum of the demands of the locations assigned to it must not exceed its capacity.</p>
<p>The CPMP can be formulated as a MIP. Here is a classical compact formulation of problem:</p>
<div class="math-wrapper"><div class="math notranslate nohighlight">
\[\begin{split}\begin{alignat*}{3}
z^{\star}_{IP}\,\,\,=\,\,\,\min{} &amp;\sum_{i=1}^n \sum_{j=1}^n d_{ij} x_{ij} \hspace{-2em} &amp;&amp;&amp;&amp;\\
                     \text{s. t.} &amp;\sum_{j=1}^n  x_{ij} &amp;&amp;= 1 \quad &amp;\forall i &amp;\in [n]\\
                                  &amp;\sum_{i=1}^{n} q_i x_{ij} &amp;&amp;\leq Q_j y_j \quad &amp;\forall j &amp;\in [n] \\
                                  &amp;\sum_{j=1}^n  y_j &amp;&amp;= p &amp;&amp; \\
                                  &amp;x_{ij} \in \{0,1\}, y_j \in \{0,1\} \hspace{-6em} &amp;&amp;\hspace{6em}\quad&amp; \forall i,j &amp;\in [n].
\end{alignat*}\end{split}\]</div></div>
<p>There are different approaches to solve the CPMP. As it has a structure, we can try to solve using a Branch-Cut-and-Price approach. For that we want to use the <code class="docutils literal notranslate"><span class="pre">PyGCGOpt</span></code> interface to interact with GCG. We will consider three use-cases: (1) The Automatic Mode, (2) Exploring different Decompositions, and (3) Building a custom Decomposition.</p>
<p>To follow along with this tutorial interactively, please download the Jupyter notebook from the <a class="reference external" href="https://github.com/scipopt/PyGCGOpt/tree/master/examples/cpmp">examples folder</a>.</p>
<section id="Reading-in-the-Instance">
<h2>Reading in the Instance<a class="headerlink" href="#Reading-in-the-Instance" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">PyGCGOpt</span></code> interface offers two methods to specify a problem. The first is to load the model from a standardized file format (e.g., <code class="docutils literal notranslate"><span class="pre">.lp</span></code> or <code class="docutils literal notranslate"><span class="pre">.mps</span></code>) that is supported by <code class="docutils literal notranslate"><span class="pre">SCIP</span></code> using <code class="docutils literal notranslate"><span class="pre">Model.readProb()</span></code>. Optionally, one can also read in a decomposition from a <code class="docutils literal notranslate"><span class="pre">.dec</span></code> file in the same manner. In this example, we will use the second method: Modeling a problem directly in Python.</p>
<p>Execute the following cell which includes a trivial test instance and function to load more instances from a custom <code class="docutils literal notranslate"><span class="pre">JSON</span></code> file format.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">json</span>

<span class="k">def</span> <span class="nf">get_simple_instance</span><span class="p">():</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">p</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">46</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">30</span><span class="p">},</span> <span class="mi">1</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">22</span><span class="p">},</span> <span class="mi">2</span><span class="p">:</span> <span class="p">{</span><span class="mi">2</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">40</span><span class="p">},</span> <span class="mi">3</span><span class="p">:</span> <span class="p">{</span><span class="mi">3</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">22</span><span class="p">},</span> <span class="mi">4</span><span class="p">:</span> <span class="p">{</span><span class="mi">4</span><span class="p">:</span> <span class="mi">0</span><span class="p">}}</span>
    <span class="n">q</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="mi">6</span><span class="p">}</span>
    <span class="n">Q</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span><span class="p">:</span> <span class="mi">33</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)}</span>
    <span class="k">return</span> <span class="n">n</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">Q</span>

<span class="k">def</span> <span class="nf">read_instance_json</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="nb">int</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="p">{</span><span class="nb">int</span><span class="p">(</span><span class="n">kk</span><span class="p">):</span> <span class="n">vv</span> <span class="k">for</span> <span class="n">kk</span><span class="p">,</span> <span class="n">vv</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">instance</span><span class="p">[</span><span class="s2">"d"</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
    <span class="n">q</span> <span class="o">=</span> <span class="p">{</span><span class="nb">int</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">instance</span><span class="p">[</span><span class="s2">"q"</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
    <span class="n">Q</span> <span class="o">=</span> <span class="p">{</span><span class="nb">int</span><span class="p">(</span><span class="n">k</span><span class="p">):</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">instance</span><span class="p">[</span><span class="s2">"Q"</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
    <span class="k">return</span> <span class="n">instance</span><span class="p">[</span><span class="s2">"n"</span><span class="p">],</span> <span class="n">instance</span><span class="p">[</span><span class="s2">"p"</span><span class="p">],</span> <span class="n">d</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">Q</span>

<span class="n">n_locations</span><span class="p">,</span> <span class="n">n_clusters</span><span class="p">,</span> <span class="n">distances</span><span class="p">,</span> <span class="n">demands</span><span class="p">,</span> <span class="n">capacities</span> <span class="o">=</span> <span class="n">read_instance_json</span><span class="p">(</span><span class="s2">"instances/p550-01.json"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Setting-up-the-Model">
<h2>Setting up the Model<a class="headerlink" href="#Setting-up-the-Model" title="Permalink to this headline">¶</a></h2>
<p>Now, we want to build the model based on the above formulation. Please note that this part is <em>not</em> specific to GCG but is <em>almost</em> identical to how one would build the same model with <code class="docutils literal notranslate"><span class="pre">PySCIPOpt</span></code>. In fact, the only difference is that we import and instanciate <code class="docutils literal notranslate"><span class="pre">GCGModel</span></code> instead of <code class="docutils literal notranslate"><span class="pre">Model</span></code>. In technical terms, <code class="docutils literal notranslate"><span class="pre">GCGModel</span></code> is a subclass of <code class="docutils literal notranslate"><span class="pre">Model</span></code> and, therefore, you can use all methods of <code class="docutils literal notranslate"><span class="pre">Model</span></code> to build your problem.</p>
<p>In order to recreate the model multiple times during this example, we create a method that will return the model. The method also returns the different constraints added to the model grouped by type. This will be important later in use-case 3.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">pygcgopt</span> <span class="kn">import</span> <span class="n">GCGModel</span><span class="p">,</span> <span class="n">quicksum</span>

<span class="k">def</span> <span class="nf">build_model</span><span class="p">(</span><span class="n">n_locations</span><span class="p">,</span> <span class="n">n_clusters</span><span class="p">,</span> <span class="n">distances</span><span class="p">,</span> <span class="n">demands</span><span class="p">,</span> <span class="n">capacities</span><span class="p">):</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">GCGModel</span><span class="p">()</span>

    <span class="n">m</span><span class="o">.</span><span class="n">printVersion</span><span class="p">()</span>
    <span class="n">m</span><span class="o">.</span><span class="n">redirectOutput</span><span class="p">()</span>

    <span class="n">m</span><span class="o">.</span><span class="n">setMinimize</span><span class="p">()</span>

    <span class="n">x</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_locations</span><span class="p">):</span>
        <span class="n">y</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">addVar</span><span class="p">(</span><span class="sa">f</span><span class="s2">"y_</span><span class="si">{</span><span class="n">j</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">vtype</span><span class="o">=</span><span class="s2">"B"</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_locations</span><span class="p">):</span>
            <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">addVar</span><span class="p">(</span><span class="sa">f</span><span class="s2">"x_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">j</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">vtype</span><span class="o">=</span><span class="s2">"B"</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="n">distances</span><span class="p">[</span><span class="nb">min</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)][</span><span class="nb">max</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">)])</span>

    <span class="c1"># Hold different constraint types</span>
    <span class="n">conss_assignment</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">conss_capacity</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">cons_pmedian</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Create the assignment constraints</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_locations</span><span class="p">):</span>
        <span class="n">conss_assignment</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">m</span><span class="o">.</span><span class="n">addCons</span><span class="p">(</span><span class="n">quicksum</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_locations</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="c1"># Create the capacity constraints</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_locations</span><span class="p">):</span>
        <span class="n">conss_capacity</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">m</span><span class="o">.</span><span class="n">addCons</span><span class="p">(</span><span class="n">quicksum</span><span class="p">(</span><span class="n">demands</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_locations</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="n">capacities</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
        <span class="p">)</span>

    <span class="c1"># Create the p-median constraint</span>
    <span class="n">cons_pmedian</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">addCons</span><span class="p">(</span><span class="n">quicksum</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_locations</span><span class="p">))</span> <span class="o">==</span> <span class="n">n_clusters</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">m</span><span class="p">,</span> <span class="n">conss_assignment</span><span class="p">,</span> <span class="n">conss_capacity</span><span class="p">,</span> <span class="n">cons_pmedian</span>
</pre></div>
</div>
</div>
</section>
<section id="Use-Case-1:-The-Automatic-Mode">
<h2>Use-Case 1: The Automatic Mode<a class="headerlink" href="#Use-Case-1:-The-Automatic-Mode" title="Permalink to this headline">¶</a></h2>
<p>With the model built, we can now simply call the <code class="docutils literal notranslate"><span class="pre">optimize()</span></code> function and let GCG do its magic.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">m</span><span class="p">,</span> <span class="o">*</span><span class="n">conss</span> <span class="o">=</span> <span class="n">build_model</span><span class="p">(</span><span class="n">n_locations</span><span class="p">,</span> <span class="n">n_clusters</span><span class="p">,</span> <span class="n">distances</span><span class="p">,</span> <span class="n">demands</span><span class="p">,</span> <span class="n">capacities</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">optimize</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
GCG version 3.5.0 [GitHash: b54569ac6-dirty]
Copyright (C) 2010-2021 Operations Research, RWTH Aachen University
                        Konrad-Zuse-Zentrum fuer Informationstechnik Berlin (ZIB)

SCIP version 8.0.0 [precision: 8 byte] [memory: block] [mode: optimized] [LP solver: SoPlex 6.0.0] [GitHash: 1af84b0617]
Copyright (C) 2002-2021 Konrad-Zuse-Zentrum fuer Informationstechnik Berlin (ZIB)
presolving:
(round 1, exhaustive) 0 del vars, 0 del conss, 0 add conss, 0 chg bounds, 0 chg sides, 0 chg coeffs, 100 upgd conss, 0 impls, 50 clqs
   (0.1s) probing: 51/2550 (2.0%) - 0 fixings, 0 aggregations, 0 implications, 0 bound changes
   (0.1s) probing aborted: 50/50 successive totally useless probings
presolving (2 rounds: 2 fast, 2 medium, 2 exhaustive):
 0 deleted vars, 0 deleted constraints, 0 added constraints, 0 tightened bounds, 0 added holes, 0 changed sides, 0 changed coefficients
 0 implications, 2550 cliques
presolved problem has 2550 variables (2550 bin, 0 int, 0 impl, 0 cont) and 101 constraints
     50 constraints of type &lt;knapsack&gt;
     50 constraints of type &lt;setppc&gt;
      1 constraints of type &lt;linear&gt;
transformed objective value is always integral (scale: 1)
Presolving Time: 0.06
 Consclassifier "nonzeros" yields a classification with 2  different constraint classes
 Consclassifier "constypes" yields a classification with 3 different constraint classes
 Consclassifier "constypes according to miplib" yields a classification with 3 different constraint classes
 Conspartition "constypes according to miplib" is not considered since it offers the same structure as "constypes" conspartition
 Consclassifier "gamsdomain" yields a classification with 1  different constraint classes
 Consclassifier "gamssymbols" yields a classification with 1  different constraint classes
 Conspartition "gamssymbols" is not considered since it offers the same structure as "gamsdomain" conspartition
 Varclassifier "gamsdomain" yields a classification with 1  different variable classes
 Varclassifier "gamssymbols" yields a classification with 1  different variable classes
 Varpartition "gamssymbols" is not considered since it offers the same structure as "gamsdomain"
 Varclassifier "vartypes" yields a classification with 1 different variable classes
 Varpartition "vartypes" is not considered since it offers the same structure as "gamsdomain"
 Varclassifier "varobjvals" yields a classification with 116 different variable classes
 Varclassifier "varobjvalsigns" yields a classification with 2 different variable classes
 the current varclass distribution includes 116 classes but only 18 are allowed for GCGconshdlrDecompCalcCandidatesNBlocks()
 in dec_consclass: there are 3 different constraint classes
  the current constraint classifier "nonzeros" consists of 2 different classes
  the current constraint classifier "constypes" consists of 3 different classes
  the current constraint classifier "gamsdomain" consists of 1 different classes
 dec_consclass found 11 new partialdecs
dec_densemasterconss found 1 new partialdec
dec_neighborhoodmaster found 1 new partialdec
 the current varclass distribution includes 116 classes but only 9 are allowed for propagatePartialdec() of var class detector
POSTPROCESSING of decompositions. Added 0 new decomps.
Found 11 finished decompositions.
Measured running time per detector:
Detector consclass                 worked on        7 finished decompositions and took a total time of      0.001
Detector neighborhoodmaster        worked on        1 finished decompositions and took a total time of      0.000
Detector connectedbase             worked on       10 finished decompositions and took a total time of      0.005
Detector varclass                  worked on        2 finished decompositions and took a total time of      0.001
Detection Time: 0.02

A Dantzig-Wolfe reformulation is applied to solve the original problem.
Chosen structure has 50 blocks and 51 linking constraints.
This decomposition has a maxwhite score of 0.485149.
Matrix has 50 blocks, using 50 pricing problems.

  time | node  | left  |SLP iter|MLP iter|LP it/n| mem |mdpt |ovars|mvars|ocons|mcons|mcuts|  dualbound   | primalbound  |  deg   |  gap
p  0.3s|     1 |     0 |      0 |      0 |     - |  34M|   0 |2550 |   0 | 101 |   0 |   0 | 0.000000e+00 | 2.711000e+03 |   --   |    Inf
p  0.3s|     1 |     0 |      0 |      0 |     - |  33M|   0 |2550 |   0 | 101 |   0 |   0 | 0.000000e+00 | 1.785000e+03 |   --   |    Inf
p  0.4s|     1 |     0 |      0 |      0 |     - |  33M|   0 |2550 |   0 | 101 |   0 |   0 | 0.000000e+00 | 1.102000e+03 |   --   |    Inf
   0.4s|     1 |     0 |      0 |      0 |     - |  33M|   0 |2550 |   0 | 101 |   0 |   0 | 0.000000e+00 | 1.102000e+03 |   --   |    Inf

   0.4s
|     1 |     0 |      0 |      0 |     - |  34M|   0 |2550 |  50 | 102 | 102 |   0 | 0.000000e+00 | 1.102000e+03 |   0.00%|    Inf
 0.4s|     1 |     0 |      0 |      0 |     - |  34M|   0 |2550 | 150 | 102 | 102 |   0 | 0.000000e+00 | 1.102000e+03 |   0.00%|    Inf
   0.7s|     1 |     0 |   2081 |   2081 |     - |  41M|   0 |2550 |1699 | 102 | 102 |   0 | 7.050000e+02 | 1.102000e+03 |Starting reduced cost pricing...
  36.95%|  56.31%X  1.9s|     1 |     0 |   3055 |   3055 |     - |  57M|   0 |2550 |1749 | 102 |
 102 |   0 | 7.050000e+02 | 8.150000e+02 |  36.95%|  15.60%
Y  2.0s|     1 |     0 |   3055 |   3055 |     - |  57M|   0 |2550 |1799 | 102 | 102 |   0 | 7.050000e+02 | 7.580000e+02 |  36.95%|   7.52%
   2.0s|     1 |     0 |   3055 |   3055 |     - |  57M|   0 |2550 |1799 | 102 | 102 |   0 | 7.050000e+02 | 7.580000e+02 |  36.95%|   7.52%
   2.1s|     1 |     0 |   3055 |   3055 |     - |  57M|   0 |2550 |1799 | 102 | 102 |   0 | 7.050000e+02 | 7.580000e+02 |  36.95%|   7.52%
   2.1s|     1 |     2 |   3055 |   3055 |     - |  57M|   0 |2550 |1799 | 102 | 102 |   0 | 7.050000e+02 | 7.580000e+02 |  36.95%|   7.52%
*r 2.4s|     6 |     5 |   4384 |   4384 | 327.4 |  59M|   3 |2550 |2002 | 102 | 102 |   0 | 7.065000e+02 | 7.380000e+02 |   --   |   4.46%
*r 2.4s|     6 |     5 |   4482 |   4482 | 347.0 |  59M|   3 |2550 |2053 | 102 | 102 |   0 | 7.065000e+02 | 7.340000e+02 |   --   |   3.89%
*r 3.1s|    15 |     6 |   6679 |   6679 | 280.9 |  60M|   5 |2550 |2237 | 102 | 102 |   0 | 7.102222e+02 | 7.130000e+02 |   --   |   0.39%

SCIP Status        : problem is solved [optimal solution found]
Solving Time (sec) : 3.73
Solving Nodes      : 21
Primal Bound       : +7.13000000000000e+02 (13 solutions)
Dual Bound         : +7.13000000000000e+02
Gap                : 0.00 %
</pre></div></div>
</div>
</section>
<section id="Use-Case-2:-Exploring-different-Decompositions">
<h2>Use-Case 2: Exploring different Decompositions<a class="headerlink" href="#Use-Case-2:-Exploring-different-Decompositions" title="Permalink to this headline">¶</a></h2>
<p>Above, we have seen GCG in its fully automatic mode. If we want to dig deeper, we can inspect the different decompositions that GCG detects. For that, we recreate the model and manually execute <code class="docutils literal notranslate"><span class="pre">presolve()</span></code> and <code class="docutils literal notranslate"><span class="pre">detect()</span></code> for the model. At this stage it is possible to list and visualize the found decompositions.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">m</span><span class="p">,</span> <span class="o">*</span><span class="n">conss</span> <span class="o">=</span> <span class="n">build_model</span><span class="p">(</span><span class="n">n_locations</span><span class="p">,</span> <span class="n">n_clusters</span><span class="p">,</span> <span class="n">distances</span><span class="p">,</span> <span class="n">demands</span><span class="p">,</span> <span class="n">capacities</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">presolve</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">detect</span><span class="p">()</span>

<span class="n">decomps</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">listDecompositions</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"GCG found </span><span class="si">{}</span><span class="s2"> finnished decompositions."</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">decomps</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
GCG version 3.5.0 [GitHash: b54569ac6-dirty]
Copyright (C) 2010-2021 Operations Research, RWTH Aachen University
                        Konrad-Zuse-Zentrum fuer Informationstechnik Berlin (ZIB)

SCIP version 8.0.0 [precision: 8 byte] [memory: block] [mode: optimized] [LP solver: SoPlex 6.0.0] [GitHash: 1af84b0617]
Copyright (C) 2002-2021 Konrad-Zuse-Zentrum fuer Informationstechnik Berlin (ZIB)
presolving:
(round 1, exhaustive) 0 del vars, 0 del conss, 0 add conss, 0 chg bounds, 0 chg sides, 0 chg coeffs, 100 upgd conss, 0 impls, 50 clqs
   (0.0s) probing: 51/2550 (2.0%) - 0 fixings, 0 aggregations, 0 implications, 0 bound changes
   (0.0s) probing aborted: 50/50 successive totally useless probings
presolving (2 rounds: 2 fast, 2 medium, 2 exhaustive):
 0 deleted vars, 0 deleted constraints, 0 added constraints, 0 tightened bounds, 0 added holes, 0 changed sides, 0 changed coefficients
 0 implications, 2550 cliques
presolved problem has 2550 variables (2550 bin, 0 int, 0 impl, 0 cont) and 101 constraints
     50 constraints of type &lt;knapsack&gt;
     50 constraints of type &lt;setppc&gt;
      1 constraints of type &lt;linear&gt;
transformed objective value is always integral (scale: 1)
Presolving Time: 0.05
starting detection
 Consclassifier "nonzeros" yields a classification with 2  different constraint classes
 Consclassifier "constypes" yields a classification with 3 different constraint classes
 Consclassifier "constypes according to miplib" yields a classification with 3 different constraint classes
 Conspartition "constypes according to miplib" is not considered since it offers the same structure as "constypes" conspartition
 Consclassifier "gamsdomain" yields a classification with 1  different constraint classes
 Consclassifier "gamssymbols" yields a classification with 1  different constraint classes
 Conspartition "gamssymbols" is not considered since it offers the same structure as "gamsdomain" conspartition
 Varclassifier "gamsdomain" yields a classification with 1  different variable classes
 Varclassifier "gamssymbols" yields a classification with 1  different variable classes
 Varpartition "gamssymbols" is not considered since it offers the same structure as "gamsdomain"
 Varclassifier "vartypes" yields a classification with 1 different variable classes
 Varpartition "vartypes" is not considered since it offers the same structure as "gamsdomain"
 Varclassifier "varobjvals" yields a classification with 116 different variable classes
 Varclassifier "varobjvalsigns" yields a classification with 2 different variable classes
 the current varclass distribution includes 116 classes but only 18 are allowed for GCGconshdlrDecompCalcCandidatesNBlocks()
 in dec_consclass: there are 3 different constraint classes
  the current constraint classifier "nonzeros" consists of 2 different classes
  the current constraint classifier "constypes" consists of 3 different classes
  the current constraint classifier "gamsdomain" consists of 1 different classes
 dec_consclass found 11 new partialdecs
dec_densemasterconss found 1 new partialdec
dec_neighborhoodmaster found 1 new partialdec
POSTPROCESSING of decompositions. Added 0 new decomps.
 the current varclass distribution includes 116 classes but only 9 are allowed for propagatePartialdec() of var class detector
Found 11 finished decompositions.
Measured running time per detector:
Detector consclass                 worked on        7 finished decompositions and took a total time of      0.000
Detector neighborhoodmaster        worked on        1 finished decompositions and took a total time of      0.000
Detector connectedbase             worked on       10 finished decompositions and took a total time of      0.005
Detector varclass                  worked on        2 finished decompositions and took a total time of      0.001
Detection Time: 0.01
GCG found 11 finnished decompositions.
</pre></div></div>
</div>
<section id="Inspecting-Decompositions">
<h3>Inspecting Decompositions<a class="headerlink" href="#Inspecting-Decompositions" title="Permalink to this headline">¶</a></h3>
<p>The call to <code class="docutils literal notranslate"><span class="pre">listDecompositions()</span></code> returns a list of <code class="docutils literal notranslate"><span class="pre">PartialDecomposition</span></code> objects. We can print a decomposition using the Python <code class="docutils literal notranslate"><span class="pre">print()</span></code> function to get a summary or access different fields directly.</p>
<p>For a full overview of available methods, take a look at the online documentation for the <code class="docutils literal notranslate"><span class="pre">PartialDecomposition</span></code> class, or execute <code class="docutils literal notranslate"><span class="pre">help(d)</span></code> where <code class="docutils literal notranslate"><span class="pre">d</span></code> is a decomposition object.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">decomps</span><span class="p">)</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">decomps</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span>
    <span class="sa">f</span><span class="s2">"Decomp scores: </span><span class="si">{</span><span class="n">d</span><span class="o">.</span><span class="n">classicScore</span><span class="si">=:</span><span class="s2">.04f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">d</span><span class="o">.</span><span class="n">borderAreaScore</span><span class="si">=:</span><span class="s2">.04f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">d</span><span class="o">.</span><span class="n">maxWhiteScore</span><span class="si">=:</span><span class="s2">.04f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">d</span><span class="o">.</span><span class="n">maxForWhiteScore</span><span class="si">=:</span><span class="s2">.04f</span><span class="si">}</span><span class="s2">"</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&lt;PartialDecomposition: nBlocks=0, nMasterConss=101, nMasterVars=2550, nLinkingVars=0, maxForWhiteScore=0.0&gt;, &lt;PartialDecomposition: nBlocks=1, nMasterConss=0, nMasterVars=0, nLinkingVars=0, maxForWhiteScore=0.0&gt;, &lt;PartialDecomposition: nBlocks=50, nMasterConss=51, nMasterVars=0, nLinkingVars=0, maxForWhiteScore=0.48514851485148514&gt;, &lt;PartialDecomposition: nBlocks=51, nMasterConss=50, nMasterVars=0, nLinkingVars=0, maxForWhiteScore=0.49504950495049505&gt;, &lt;PartialDecomposition: nBlocks=1, nMasterConss=50, nMasterVars=0, nLinkingVars=0, maxForWhiteScore=0.0&gt;, &lt;PartialDecomposition: nBlocks=1, nMasterConss=100, nMasterVars=2500, nLinkingVars=0, maxForWhiteScore=0.009706853038245034&gt;, &lt;PartialDecomposition: nBlocks=1, nMasterConss=1, nMasterVars=0, nLinkingVars=0, maxForWhiteScore=0.0&gt;, &lt;PartialDecomposition: nBlocks=50, nMasterConss=51, nMasterVars=50, nLinkingVars=0, maxForWhiteScore=0.4853426519122501&gt;, &lt;PartialDecomposition: nBlocks=1, nMasterConss=1, nMasterVars=0, nLinkingVars=0, maxForWhiteScore=0.0&gt;, &lt;PartialDecomposition: nBlocks=101, nMasterConss=0, nMasterVars=0, nLinkingVars=2550, maxForWhiteScore=0.019291161956034086&gt;, &lt;PartialDecomposition: nBlocks=0, nMasterConss=101, nMasterVars=100, nLinkingVars=2450, maxForWhiteScore=0.0&gt;]
Decomp scores: d.classicScore=-1.0000, d.borderAreaScore=-1.0000, d.maxWhiteScore=0.4851, d.maxForWhiteScore=0.4851
</pre></div></div>
</div>
</section>
<section id="Visualizing-Decompositions">
<h3>Visualizing Decompositions<a class="headerlink" href="#Visualizing-Decompositions" title="Permalink to this headline">¶</a></h3>
<p>In addition, GCG can create graphical visualizations of decompositions. They can easily be displayed in a Jupyter nodebook like so:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/examples_cpmp_cpmp_12_0.svg" src="../../_images/examples_cpmp_cpmp_12_0.svg"/></div>
</div>
</section>
<section id="Selecting-Decompositions">
<h3>Selecting Decompositions<a class="headerlink" href="#Selecting-Decompositions" title="Permalink to this headline">¶</a></h3>
<p>After this investigation, we decide that we like this particular decomposition. The following code orders GCG to select our decomposition instead of an automatic one. Then, the optimization process is started.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">d</span><span class="o">.</span><span class="n">isSelected</span> <span class="o">=</span> <span class="kc">True</span>

<span class="n">m</span><span class="o">.</span><span class="n">optimize</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

A Dantzig-Wolfe reformulation is applied to solve the original problem.
Chosen structure has 50 blocks and 51 linking constraints.
This decomposition has a maxwhite score of 0.485149.
Matrix has 50 blocks, using 50 pricing problems.

  time | node  | left  |SLP iter|MLP iter|LP it/n| mem |mdpt |ovars|mvars|ocons|mcons|mcuts|  dualbound   | primalbound  |  deg   |  gap
p  0.2s|     1 |     0 |      0 |      0 |     - |  34M|   0 |2550 |   0 | 101 |   0 |   0 | 0.000000e+00 | 2.711000e+03 |   --   |    Inf
p  0.3s|     1 |     0 |      0 |      0 |     - |  33M|   0 |2550 |   0 | 101 |   0 |   0 | 0.000000e+00 | 1.785000e+03 |   --   |    Inf
p  0.3s|     1 |     0 |      0 |      0 |     - |  33M|   0 |2550 |   0 | 101 |   0 |   0 | 0.000000e+00 | 1.102000e+03 |   --   |    Inf
   0.3s|     1 |     0 |      0 |      0 |     - |  33M|   0 |2550 |   0 | 101 |   0 |   0 | 0.000000e+00 | 1.102000e+03 |   --   |    Inf

 0.3s|     1 |     0 |      0 |      0 |     - |  34M|   0 |2550 |  50 | 102 | 102 |   0 | 0.000000e+00 | 1.102000e+03 |   0.00%|    Inf    0.4s|     1 |     0 |      0 |      0 |     -
|  34M|   0 |2550 | 150 | 102 | 102 |   0 | 0.000000e+00 | 1.102000e+03 |   0.00%|    Inf

Starting reduced cost pricing...
 0.6s|     1 |     0 |   2081 |   2081 |     - |  41M|   0 |2550 |1699 | 102 | 102 |   0 | 7.050000e+02 | 1.102000e+03 |  36.95%|  56.31%X
  1.8s|     1 |     0 |   3055 |   3055 |     - |  57M|   0 |2550 |1749 | 102 | 102 |   0 | 7.050000e+02 | 8.150000e+02 |  36.95%|  15.60%
Y  1.9s|     1 |     0 |   3055 |   3055 |     - |  57M|   0 |2550 |1799 | 102 | 102 |   0 | 7.050000e+02 | 7.580000e+02 |  36.95%|   7.52%
   1.9s|     1 |     0 |   3055 |   3055 |     - |  57M|   0 |2550 |1799 | 102 | 102 |   0 | 7.050000e+02 | 7.580000e+02 |  36.95%|   7.52%
   1.9s|     1 |     0 |   3055 |   3055 |     - |  57M|   0 |2550 |1799 | 102 | 102 |   0 | 7.050000e+02 | 7.580000e+02 |  36.95%|   7.52%
   1.9s|     1 |     2 |   3055 |   3055 |     - |  57M|   0 |2550 |1799 | 102 | 102 |   0 | 7.050000e+02 | 7.580000e+02 |  36.95%|   7.52%
*r 2.2s|     6 |     5 |   4384 |   4384 | 327.4 |  59M|   3 |2550 |2002 | 102 | 102 |   0 | 7.065000e+02 | 7.380000e+02 |   --   |   4.46%
*r 2.2s|     6 |     5 |   4482 |   4482 | 347.0 |  59M|   3 |2550 |2053 | 102 | 102 |   0 | 7.065000e+02 | 7.340000e+02 |   --   |   3.89%
*r 3.8s|    21 |     8 |  10167 |  10167 | 371.0 |  61M|   5 |2550 |2320 | 102 | 102 |   0 | 7.123333e+02 | 7.150000e+02 |   --   |   0.37%
  time | node  | left  |SLP iter|MLP iter|LP it/n| mem |mdpt |ovars|mvars|ocons|mcons|mcuts|  dualbound   | primalbound  |  deg   |  gap
*r 3.8s|    22 |     5 |  10229 |  10229 | 356.3 |  61M|   6 |2550 |2320 | 102 | 102 |   0 | 7.123333e+02 | 7.140000e+02 |   --   |   0.23%
*r 3.9s|    22 |     0 |  10437 |  10437 | 366.2 |  62M|   6 |2550 |2507 | 102 | 102 |   0 | 7.123333e+02 | 7.130000e+02 |   --   |   0.09%

SCIP Status        : problem is solved [optimal solution found]
Solving Time (sec) : 3.95
Solving Nodes      : 22
Primal Bound       : +7.13000000000000e+02 (12 solutions)
Dual Bound         : +7.13000000000000e+02
Gap                : 0.00 %
</pre></div></div>
</div>
</section>
</section>
<section id="Use-Case-3:-Building-a-custom-Decomposition">
<h2>Use-Case 3: Building a custom Decomposition<a class="headerlink" href="#Use-Case-3:-Building-a-custom-Decomposition" title="Permalink to this headline">¶</a></h2>
<p>In the previous use-cases we run GCG with automatically detected decompositions. This is useful if we do not know the exact structure of a model but still want to exploit GCG’s decomposition approach.</p>
<p>However, for our model we <em>do</em> know its structure. If you take another look at our <code class="docutils literal notranslate"><span class="pre">build_model()</span></code> method, you will notice that we store the created constraints in different variables based on their type. This is a typical approach when we want to specify a custom decomposition after building the model using the Python interface.</p>
<p>In the following code, we recreate our model and use the different constraint types fo select constraints for reformulation and constraints for the Dantzig-Wolfe master problem.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">m</span><span class="p">,</span> <span class="n">conss_assignment</span><span class="p">,</span> <span class="n">conss_capacity</span><span class="p">,</span> <span class="n">cons_pmedian</span> <span class="o">=</span> <span class="n">build_model</span><span class="p">(</span>
    <span class="n">n_locations</span><span class="p">,</span> <span class="n">n_clusters</span><span class="p">,</span> <span class="n">distances</span><span class="p">,</span> <span class="n">demands</span><span class="p">,</span> <span class="n">capacities</span>
<span class="p">)</span>

<span class="n">conss_master</span> <span class="o">=</span> <span class="n">conss_assignment</span> <span class="o">+</span> <span class="p">[</span><span class="n">cons_pmedian</span><span class="p">]</span>
<span class="n">conss_reform</span> <span class="o">=</span> <span class="n">conss_capacity</span>

<span class="n">pd</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">createPartialDecomposition</span><span class="p">()</span>
<span class="n">pd</span><span class="o">.</span><span class="n">fixConssToMaster</span><span class="p">(</span><span class="n">conss_master</span><span class="p">)</span>

<span class="k">for</span> <span class="n">block</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">conss_reform</span><span class="p">):</span>
    <span class="n">pd</span><span class="o">.</span><span class="n">fixConsToBlock</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">block</span><span class="p">)</span>

<span class="n">m</span><span class="o">.</span><span class="n">addPreexistingPartialDecomposition</span><span class="p">(</span><span class="n">pd</span><span class="p">)</span>

<span class="n">m</span><span class="o">.</span><span class="n">optimize</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
GCG version 3.5.0 [GitHash: b54569ac6-dirty]
Copyright (C) 2010-2021 Operations Research, RWTH Aachen University
                        Konrad-Zuse-Zentrum fuer Informationstechnik Berlin (ZIB)

SCIP version 8.0.0 [precision: 8 byte] [memory: block] [mode: optimized] [LP solver: SoPlex 6.0.0] [GitHash: 1af84b0617]
Copyright (C) 2002-2021 Konrad-Zuse-Zentrum fuer Informationstechnik Berlin (ZIB)
 added complete decomp for original problem with 50 blocks and 51 masterconss, 0 linkingvars, 0 mastervars, and max white score of   0.485149
there is an original decomposition and problem is not presolved yet -&gt; disable presolving and start optimizing (rerun with presolve command before detect command for detecting in presolved problem)
presolving:
presolving (0 rounds: 0 fast, 0 medium, 0 exhaustive):
 0 deleted vars, 0 deleted constraints, 0 added constraints, 0 tightened bounds, 0 added holes, 0 changed sides, 0 changed coefficients
 0 implications, 0 cliques
presolved problem has 2550 variables (2550 bin, 0 int, 0 impl, 0 cont) and 101 constraints
    101 constraints of type &lt;linear&gt;
transformed objective value is always integral (scale: 1)
Presolving Time: 0.00
 calculated translation; number of missing constraints: 0; number of other partialdecs: 1
Preexisting decomposition found. Solution process started...

A Dantzig-Wolfe reformulation is applied to solve the original problem.
Chosen structure has 50 blocks and 51 linking constraints.
This decomposition has a maxwhite score of 0.485149.
Matrix has 50 blocks, using 50 pricing problems.

  time | node  | left  |SLP iter|MLP iter|LP it/n| mem |mdpt |ovars|mvars|ocons|mcons|mcuts|  dualbound   | primalbound  |  deg   |  gap
p  0.1s|     1 |     0 |      0 |      0 |     - |  28M|   0 |2550 |   0 | 101 |   0 |   0 | 0.000000e+00 | 2.848000e+03 |   --   |    Inf
   0.1s|     1 |     0 |      0 |      0 |     - |  28M|   0 |2550 |   0 | 101 |   0 |   0 | 0.000000e+00 | 2.848000e+03 |   --   |    Inf


   0.2s|     1 |     0 |      0 |      0 |     - |  28M|   0 |2550 |  50 | 102 | 102 |   0 | 0.000000e+00 | 2.848000e+03 |   0.00%|    Inf    0.2s|     1 |     0 |      0 |      0 |     - |  28M|   0 |2550 |  50 | 102 | 102 |   0 | 0.000000e+00 | 2.848000e+03 |   0.00%|    Inf
   0.5s|     1 |     0 |   1839 |   1839 |     - |  38M|   0 |2550 |2302 | 102 | 102 |   0 | 0.000000e+00 | 2.848000e+03 |  49.42%|    Inf    0.9s|
Starting reduced cost pricing...

     1 |     0 |   3939 |   3939 |     - |  41M|   0 |2550 |2933 | 102 | 102 |   0 | 7.024809e+02 | 2.848000e+03 |  35.22%| 305.42%
 1.0s|     1 |     0 |   3939 |   3939 |     - |  41M|   0 |2550 |2933 | 102 | 102 |   0 | 7.050000e+02 | 2.848000e+03 |  35.29%| 303.97%
d  1.9s|     1 |     0 |   5187 |   5187 |     - |  51M|   0 |2550 |2983 | 102 | 102 |   0 | 7.050000e+02 | 1.245000e+03 |  35.29%|  76.60%
X  2.4s|     1 |     0 |   5187 |   5187 |     - |  51M|   0 |2550 |3033 | 102 | 102 |   0 | 7.050000e+02 | 8.110000e+02 |  35.29%|  15.04%
   2.6s|     1 |     0 |   5187 |   5187 |     - |  51M|   0 |2550 |3083 | 102 | 102 |   0 | 7.050000e+02 | 8.110000e+02 |  35.29%|  15.04%
   2.6s|     1 |     0 |   5187 |   5187 |     - |  51M|   0 |2550 |3083 | 102 | 102 |   0 | 7.050000e+02 | 8.110000e+02 |  35.29%|  15.04%
   2.6s|     1 |     2 |   5187 |   5187 |     - |  51M|   0 |2550 |3083 | 102 | 102 |   0 | 7.050000e+02 | 8.110000e+02 |  35.29%|  15.04%
*r 2.8s|     4 |     3 |   5815 |   5815 | 395.7 |  52M|   2 |2550 |3169 | 102 | 102 |   0 | 7.051111e+02 | 7.340000e+02 |   --   |   4.10%
*r 3.9s|    15 |     6 |   9636 |   9636 | 357.7 |  54M|   5 |2550 |3386 | 102 | 102 |   0 | 7.102222e+02 | 7.130000e+02 |   --   |   0.39%

SCIP Status        : problem is solved [optimal solution found]
Solving Time (sec) : 5.11
Solving Nodes      : 21
Primal Bound       : +7.13000000000000e+02 (10 solutions)
Dual Bound         : +7.13000000000000e+02
Gap                : 0.00 %
</pre></div></div>
</div>
</section>
<section id="Summary">
<h2>Summary<a class="headerlink" href="#Summary" title="Permalink to this headline">¶</a></h2>
<p>With that, we have seen the most important features to use GCG as a solver through the Python interface. In a different example, we will take a look at how GCG can be extended using Python code.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../alldecomps/alldecomps.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Exploring DW Dual Bounds</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../index.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Examples</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, Operations Research, RWTH Aachen University |
          Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
          <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            | <a class="muted-link" href="../../_sources/examples/cpmp/cpmp.ipynb.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Decomposing the Capacitated p-Median Problem</a><ul>
<li><a class="reference internal" href="#Reading-in-the-Instance">Reading in the Instance</a></li>
<li><a class="reference internal" href="#Setting-up-the-Model">Setting up the Model</a></li>
<li><a class="reference internal" href="#Use-Case-1:-The-Automatic-Mode">Use-Case 1: The Automatic Mode</a></li>
<li><a class="reference internal" href="#Use-Case-2:-Exploring-different-Decompositions">Use-Case 2: Exploring different Decompositions</a><ul>
<li><a class="reference internal" href="#Inspecting-Decompositions">Inspecting Decompositions</a></li>
<li><a class="reference internal" href="#Visualizing-Decompositions">Visualizing Decompositions</a></li>
<li><a class="reference internal" href="#Selecting-Decompositions">Selecting Decompositions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Use-Case-3:-Building-a-custom-Decomposition">Use-Case 3: Building a custom Decomposition</a></li>
<li><a class="reference internal" href="#Summary">Summary</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/scripts/furo.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    </body>
</html>